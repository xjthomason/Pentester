# TODO use nmap to scan for open ports
# TODO use nmap to scan for running services
# TODO write method to output results

import nmap

#global variables 
# open_ports = []

class Scanner():
	
	# def __init__(self, tgtHost, tgtPorts, commands):
		# # Host
		# self.tgtHost = tgtHost
		# # Port(s)
		# ports = []
		# self.tgtPorts = ports
		# # Commands
		# self.commands = command

	def nmapScan(self, tgtHost, tgtPort, commands):

		try:
			nmScan = nmap.PortScanner()
			location = raw_input("Output filename/location: ")
			if commands == "1":
				nmScan.scan(tgtHost,arguments='-A -oN %s -T4' % location)
				return
			if commands == "2":
				nmScan.scan(tgtHost,arguments='-v -p 1-65535 -O -oN %s -T4' % location)
				return
			if commands == "3":
				state = nmScan.scan[tgtHost]['tcp'][int(tgtPort)]['state']
				if state == 'open':
					print "Port %s is open." % tgtPort
				else:
					pass
				return
		except Exception, e:
			print e
			
